Para ejecutar el webscript basta con acceder a traves de un navegador a la URL de acceso. Dependiendo del numero de nodos a actualizar esta operacion podria llevar varios minutos ejecutarla, es importante no interrumpir la carga de la pagina del navegador en todo ese tiempo hasta que cargue la pantalla del webscript.
URL de acceso al webscript: http://10.215.5.14:8080/alfresco/service/org/caib/cleanPreingreso
Para desplegarlo en cualquier servidor de Alfresco hay que seguir los siguientes pasos:
1- Descargar los ficheros del webscript del servidor de desarrollo (http://10.215.5.14:8080/share) en local. La ruta en Alfresco de los ficheros es /Document Library/Webscripts/org/caib/. En esa ruta te encuentras tres archivos con extension .xml .ftl y .js (limpiezaPreingreso.get.desc.xml, limpiezaPreingreso.get.html.ftl y limpiezaPreingreso.get.js)
2- Subir los archivos en la misma ruta de Alfresco en el nuevo servidor
3- Acceder en el nuevo servidor a http://ip:puerto/alfresco/service/index. Alfresco solicitara mediante autenticacion http usuario y contrasena. Es necesario aportar un usuario de alfresco con permisos de administracion. Una vez accedes a la pagina, abajo del todo aparecera un boton de "refresh" que habra que pulsar para que el script que hemos subido a la document Library de alfresco esta disponible.
4- Una vez refrescado ya podriamos acceder a http://ip:puerto/alfresco/service/org/caib/cleanPreingreso para ejecutar el script
Hay que tener en cuenta que los expedientes con estado Preingreso se buscan a traves de busquedas lucene, que no tienen por que devolver TODOS los expedientes de una vez, sino que tiene un limite de objetos que devuelven en la busqueda. Es decir, que podria necesitar ejecutar el script varias veces hasta que se procesen todos los expedientes con estado preingreso.